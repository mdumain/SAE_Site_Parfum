{% extends 'admin/layout_admin.html' %}


{% block javascripts %}
{#    attention il faut importer la bibliotheque chart.js avant de définir l'objet chart#}
    {{ super() }}
   {# <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.js') }}" ></script>#}
{% endblock %}

{% block javascripts_head %}
{#    attention il faut importer la bibliotheque chart.js avant de définir l'objet chart#}
{#    <script src="{{ url_for('static', filename='chart.js') }}" ></script>#}
      <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
{% endblock %}

{% block title %}
    <title>afficher les types d'article</title>
{% endblock %}

{% block body %}
<br>
    <h2>Stock et valeur par déclinaison</h2>
{#    <span style="color: red;">{{ cout_total.nbr_articles }}</span></h2>#}

<table class="table table-striped">
    <thead class="table-light">
        <tr>
           <th>Parfum</th><th>Stock</th><th>Valeur Stock</th>
        </tr>
    </thead>
    <tbody>
    {% if datas_show | length >= 1 %}
        {% for ligne in datas_show %}
           <tr>
                  <td>{{ ligne.label }}</td>
                  <td>{{ ligne.stock }}</td>
                  <td>{{ ligne.value }}€</td>

           </tr>
        {% endfor %}
    {% else %}
        pas de stock
    {% endif %}
    </tbody>
</table>
    <br>
{#    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>#}


{# https://jinja.palletsprojects.com/en/3.0.x/templates/#html-escaping #}
    <div style="width: 900px; height: 500px; border: #0a53be 1px solid;">
        <canvas id="Chart1" ></canvas>
    </div>
    <div style="width: 900px; height: 500px; border: #0a53be 1px solid;">
        <canvas id="Chart2" ></canvas>
    </div>
    <script>
	var ctx1 = document.getElementById("Chart1").getContext("2d");
	var Chart1 = new Chart( ctx1, {
  		type: "bar",
  		data: {
  			labels: {{ labels | safe }},
  			datasets: [
  				{
  				label: "Valeur stock par déclinaison (€)",
  				data: {{ values | safe }},
  				fill: false,
                    backgroundColor: [
                        "#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850",
                        "#faf24c", "#6a6ce7", "#55f68f", "#D0c309", "#c45000",
                        "#f78da7", "#a29bfe", "#81ecec", "#fab1a0", "#fd79a8",
                        "#ffeaa7", "#74b9ff", "#00b894", "#fdcb6e", "#d63031",
                        "#e17055", "#0984e3", "#6c5ce7", "#00cec9", "#2d3436",
                        "#636e72", "#b2bec3", "#ff7675", "#55efc4", "#e84393",
                        "#00bcd4", "#009688", "#ff5722", "#ffc107", "#8bc34a",
                        "#673ab7", "#ff9ff3", "#feca57", "#1dd1a1", "#5f27cd",
                        "#c8d6e5", "#576574", "#10ac84", "#222f3e", "#f368e0",
                        "#ff6b6b", "#48dbfb", "#1abc9c", "#3498db", "#9b59b6",
                        "#34495e", "#16a085", "#27ae60", "#f39c12", "#e74c3c",
                        "#d35400", "#2ecc71", "#bdc3c7", "#7f8c8d", "#f1c40f"
                    ],
  				borderColor: "rgb(75,192,192)",
  				lineTension: 0.1
  				}
  			]
  		},
  		option: {
  			responsive: false
  		}
	});

    var ctx2 = document.getElementById("Chart2").getContext("2d");
    var Chart2 = new Chart( ctx2, {
        type: "bar",
        data: {
            labels: {{ labels | safe }},
            datasets: [
                {
                    label: "Stock par déclinaison (unité)",
                    data: {{ stock | safe }},
                    fill: false,
                    backgroundColor: [
                        "#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850",
                        "#faf24c", "#6a6ce7", "#55f68f", "#D0c309", "#c45000",
                        "#f78da7", "#a29bfe", "#81ecec", "#fab1a0", "#fd79a8",
                        "#ffeaa7", "#74b9ff", "#00b894", "#fdcb6e", "#d63031",
                        "#e17055", "#0984e3", "#6c5ce7", "#00cec9", "#2d3436",
                        "#636e72", "#b2bec3", "#ff7675", "#55efc4", "#e84393",
                        "#00bcd4", "#009688", "#ff5722", "#ffc107", "#8bc34a",
                        "#673ab7", "#ff9ff3", "#feca57", "#1dd1a1", "#5f27cd",
                        "#c8d6e5", "#576574", "#10ac84", "#222f3e", "#f368e0",
                        "#ff6b6b", "#48dbfb", "#1abc9c", "#3498db", "#9b59b6",
                        "#34495e", "#16a085", "#27ae60", "#f39c12", "#e74c3c",
                        "#d35400", "#2ecc71", "#bdc3c7", "#7f8c8d", "#f1c40f"
                    ],
                    borderColor: "rgb(75,192,192)",
                    lineTension: 0.1
                }
            ]
        },
        option: {
            responsive: false
        }
    });
    </script>
{% endblock %}
